[importlinter]
root_package = taipanstack
include_external_packages = False

# Independence Contract - Utils internal modules should not depend on each other
# This ensures loose coupling between utility modules
[importlinter:contract:utils-independence]
name = Utils Module Independence
type = independence
modules =
    taipanstack.utils.circuit_breaker
    taipanstack.utils.retry
    taipanstack.utils.metrics

# Core independence - core module should not import security or utils
# Core provides foundation types that other modules depend on
[importlinter:contract:core-isolation]
name = Core Layer Isolation
type = forbidden
source_modules =
    taipanstack.core
forbidden_modules =
    taipanstack.security
    taipanstack.utils
    taipanstack.config

# Config generators should not import utils directly
# Configuration generation should be self-contained
[importlinter:contract:config-independence]
name = Config Module Independence
type = forbidden
source_modules =
    taipanstack.config
forbidden_modules =
    taipanstack.utils.subprocess
    taipanstack.utils.filesystem
